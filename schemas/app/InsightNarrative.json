{
  "name": "InsightNarrative",
  "label": "Insight Narrative",
  "naming": "autoincrement",
  "isSingle": false,
  "isChild": false,
  "isSubmittable": false,
  "fields": [
    {
      "fieldname": "narrativeId",
      "label": "Narrative ID",
      "fieldtype": "Data",
      "readOnly": true,
      "description": "Auto-generated unique identifier"
    },
    {
      "fieldname": "user",
      "label": "User",
      "fieldtype": "Data",
      "readOnly": true,
      "description": "User who requested this insight"
    },
    {
      "fieldname": "timestamp",
      "label": "Timestamp",
      "fieldtype": "Datetime",
      "readOnly": true,
      "description": "When the insight was generated"
    },
    {
      "fieldname": "contextReference",
      "label": "Context Reference",
      "fieldtype": "Text",
      "readOnly": true,
      "description": "What was clicked - doctype + name + field"
    },
    {
      "fieldname": "queryTemplateUsed",
      "label": "Query Template Used",
      "fieldtype": "Link",
      "target": "InsightQueryTemplate",
      "readOnly": true,
      "description": "Link to the query template used"
    },
    {
      "fieldname": "questionAsked",
      "label": "Question Asked",
      "fieldtype": "Text",
      "readOnly": true,
      "description": "Exact question text shown to user"
    },
    {
      "fieldname": "parametersApplied",
      "label": "Parameters Applied",
      "fieldtype": "Text",
      "readOnly": true,
      "description": "Filters and date ranges used (JSON)"
    },
    {
      "fieldname": "narrativeAnswer",
      "label": "Narrative Answer",
      "fieldtype": "Text",
      "readOnly": true,
      "description": "Generated explanation"
    },
    {
      "fieldname": "dataSnapshot",
      "label": "Data Snapshot",
      "fieldtype": "Text",
      "readOnly": true,
      "description": "JSON of numbers referenced in the answer"
    },
    {
      "fieldname": "sourceDocuments",
      "label": "Source Documents",
      "fieldtype": "Text",
      "readOnly": true,
      "description": "Comma-separated list of linked document references"
    },
    {
      "fieldname": "breadcrumbTrail",
      "label": "Breadcrumb Trail",
      "fieldtype": "Text",
      "readOnly": true,
      "description": "Chain of follow-up questions (if any)"
    },
    {
      "fieldname": "sessionId",
      "label": "Session ID",
      "fieldtype": "Data",
      "readOnly": true,
      "description": "Groups related queries together"
    }
  ],
  "quickEditFields": [
    "user",
    "timestamp",
    "queryTemplateUsed",
    "questionAsked",
    "narrativeAnswer"
  ],
  "keywordFields": ["narrativeId", "questionAsked", "user"]
}
