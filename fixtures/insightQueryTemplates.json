[
  {
    "name": "pl-variance-analysis",
    "templateId": "pl-variance-analysis",
    "contextType": "Report",
    "contextField": "profit_value",
    "questionText": "Why did profit change this period?",
    "queryFunction": "compare_pl_periods",
    "answerTemplate": "Your profit {current_profit} compared to previous period {previous_profit}. Variance: {variance_amount} ({variance_percent}%). Top contributors: {top_contributors}",
    "requiredDoctypes": "AccountingLedgerEntry,Account",
    "isActive": 1,
    "trustLevel": "1",
    "displayOrder": 1
  },
  {
    "name": "ledger-balance-breakdown",
    "templateId": "ledger-balance-breakdown",
    "contextType": "Ledger",
    "contextField": "balance_amount",
    "questionText": "What transactions built this balance?",
    "queryFunction": "trace_ledger_movements",
    "answerTemplate": "Account {account}: Opening balance {opening_balance}, Closing balance {closing_balance}, Net change {net_change}. Transaction groups: {transaction_groups}",
    "requiredDoctypes": "AccountingLedgerEntry,Payment,JournalEntry",
    "isActive": 1,
    "trustLevel": "1",
    "displayOrder": 2
  },
  {
    "name": "customer-outstanding-analysis",
    "templateId": "customer-outstanding-analysis",
    "contextType": "Customer",
    "contextField": "outstanding_amount",
    "questionText": "Why is this customer's outstanding high?",
    "queryFunction": "analyze_customer_outstanding",
    "answerTemplate": "Outstanding amount: {outstanding} from {invoice_count} invoices. Total invoiced: {total_invoiced}, Total paid: {total_paid}. Overdue invoices: {overdue_invoices}",
    "requiredDoctypes": "SalesInvoice,Payment",
    "isActive": 1,
    "trustLevel": "1",
    "displayOrder": 3
  },
  {
    "name": "cash-movement-analysis",
    "templateId": "cash-movement-analysis",
    "contextType": "Account",
    "contextField": "balance_amount",
    "questionText": "Why did cash decrease this month?",
    "queryFunction": "trace_ledger_movements",
    "answerTemplate": "Account {account}: Opening balance {opening_balance}, Closing balance {closing_balance}, Net change {net_change}. Transaction groups: {transaction_groups}",
    "requiredDoctypes": "AccountingLedgerEntry,Payment",
    "isActive": 1,
    "trustLevel": "1",
    "displayOrder": 4
  },
  {
    "name": "top-expenses-analysis",
    "templateId": "top-expenses-analysis",
    "contextType": "Report",
    "contextField": "expense_value",
    "questionText": "What are my top 5 expenses?",
    "queryFunction": "compare_pl_periods",
    "answerTemplate": "Your profit {current_profit} compared to previous period {previous_profit}. Variance: {variance_amount} ({variance_percent}%). Top contributors: {top_contributors}",
    "requiredDoctypes": "AccountingLedgerEntry,Account",
    "isActive": 1,
    "trustLevel": "1",
    "displayOrder": 5
  },
  {
    "name": "gst-liability-analysis",
    "templateId": "gst-liability-analysis",
    "contextType": "Account",
    "contextField": "balance_amount",
    "questionText": "Why is GST liability high/low?",
    "queryFunction": "trace_ledger_movements",
    "answerTemplate": "Account {account}: Opening balance {opening_balance}, Closing balance {closing_balance}, Net change {net_change}. Transaction groups: {transaction_groups}",
    "requiredDoctypes": "AccountingLedgerEntry,SalesInvoice,PurchaseInvoice",
    "isActive": 1,
    "trustLevel": "1",
    "displayOrder": 6
  },
  {
    "name": "vendor-payment-ranking",
    "templateId": "vendor-payment-ranking",
    "contextType": "Vendor",
    "contextField": "total_paid",
    "questionText": "Which vendor am I paying the most to?",
    "queryFunction": "analyze_customer_outstanding",
    "answerTemplate": "Outstanding amount: {outstanding} from {invoice_count} invoices. Total invoiced: {total_invoiced}, Total paid: {total_paid}. Overdue invoices: {overdue_invoices}",
    "requiredDoctypes": "Payment,PurchaseInvoice",
    "isActive": 1,
    "trustLevel": "1",
    "displayOrder": 7
  },
  {
    "name": "expense-variance-analysis",
    "templateId": "expense-variance-analysis",
    "contextType": "Account",
    "contextField": "balance_amount",
    "questionText": "Why is this expense higher than expected?",
    "queryFunction": "compare_pl_periods",
    "answerTemplate": "Your profit {current_profit} compared to previous period {previous_profit}. Variance: {variance_amount} ({variance_percent}%). Top contributors: {top_contributors}",
    "requiredDoctypes": "AccountingLedgerEntry,Account",
    "isActive": 1,
    "trustLevel": "2",
    "displayOrder": 8
  },
  {
    "name": "customer-payment-pattern",
    "templateId": "customer-payment-pattern",
    "contextType": "Customer",
    "contextField": "payment_history",
    "questionText": "Show payment pattern for this customer",
    "queryFunction": "analyze_customer_outstanding",
    "answerTemplate": "Outstanding amount: {outstanding} from {invoice_count} invoices. Total invoiced: {total_invoiced}, Total paid: {total_paid}. Overdue invoices: {overdue_invoices}",
    "requiredDoctypes": "Payment,SalesInvoice",
    "isActive": 1,
    "trustLevel": "1",
    "displayOrder": 9
  },
  {
    "name": "overdue-invoices-aging",
    "templateId": "overdue-invoices-aging",
    "contextType": "Customer",
    "contextField": "outstanding_amount",
    "questionText": "Which invoices are overdue?",
    "queryFunction": "analyze_customer_outstanding",
    "answerTemplate": "Outstanding amount: {outstanding} from {invoice_count} invoices. Total invoiced: {total_invoiced}, Total paid: {total_paid}. Overdue invoices: {overdue_invoices}",
    "requiredDoctypes": "SalesInvoice",
    "isActive": 1,
    "trustLevel": "1",
    "displayOrder": 10
  }
]
